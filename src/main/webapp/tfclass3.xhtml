<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Transcription factor classification</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="EmulateIE8"/>
        <h:outputStylesheet name="css/screen.css"/>
    </h:head>
    <body>
        <h1>Classification of Transcription Factors in Mammalia</h1>
    <p:panel>
        <h:form id="classificationForm">

            <p:tree id="cfTree" class="treePanel" value="#{classificationBean.classificationRoot}" var="node" dynamic="true" animate="true"
                    selectionMode="single" selection="#{classificationBean.selectedNode}" >
                <p:ajax event="select" update="cfTree :classificationForm:detailsPanel" />
                <p:treeNode><h:outputText value="#{node.name} #{node.label}" />
                </p:treeNode>
                <p:treeNode type="Superclass"><img src="#{request.contextPath}/resources/superclass.gif" height="15px"/>
                    <h:outputText value="#{node.name} #{node.label}" />
                </p:treeNode>
                <p:treeNode type="Class"><img src="#{request.contextPath}/resources/class.gif" height="15px"/>
                    <h:outputText value="#{node.name} #{node.label}" />
                </p:treeNode>
                <p:treeNode type="Family"><img src="#{request.contextPath}/resources/family.gif" height="15px"/>
                    <h:outputText value="#{node.name} #{node.label}" />
                </p:treeNode>
                <p:treeNode type="Genus"><img src="#{request.contextPath}/resources/genus.gif" height="15px"/>
                    <h:outputText value="#{node.name} #{node.label}" />
                </p:treeNode>
                <p:treeNode type="Factor species"><img src="#{request.contextPath}/resources/fspecies.gif" height="15px"/>
                    <h:outputText value="#{node.name} #{node.label}" />
                </p:treeNode>
                <p:treeNode type="Subfamily"><img src="#{request.contextPath}/resources/subfamily.gif" height="15px"/>
                    <h:outputText value="#{node.name} #{node.label}" />
                </p:treeNode>
            </p:tree>
            <p:panel id="detailsPanel"  class="detailsPanel">
                <p:growl id="msgs" showDetail="true" />
                Dashboard
                <p:dashboard  id="detailsDashboard" class="dashboard" model="#{detailsDashboard.model}">
                    <p:ajax event="reorder" listener="#{detailsDashboard.handleReorder}" update="msgs" />
                    <p:panel id="generalReport" header="General" class="reportPanel">

                        <h:outputText value="About #{classificationBean.getAnnotationValueOfSelectedNode('label')}"
                                      class="bold" rendered="#{not empty classificationBean.getAnnotationValueOfSelectedNode('about')}"/><br/>
                        <h:outputText value="#{classificationBean.getAnnotationValueOfSelectedNode('about')}" />

                        <h:outputText value="Consensus sequence"
                                      class="bold" rendered="#{not empty classificationBean.getAnnotationValueOfSelectedNode('consensus_sequence')}"/><br/>
                        <h:outputText value="#{classificationBean.getAnnotationValueOfSelectedNode('consensus_sequence')}" />

                        <h:outputText value="Distribution of #{classificationBean.getAnnotationValueOfSelectedNode('label')}"
                                      class="bold" rendered="#{not empty classificationBean.getSpeciesOfSelectedNode().size()}"/><br/>           
                        <h:outputText value="#{classificationBean.getSpeciesOfSelectedNode().size()} species with this transcription factor." 
                                      rendered="#{not empty classificationBean.getSpeciesOfSelectedNode().size()}"/>
                    </p:panel>
                    <p:panel id="human" rendered="#{classificationBean.selectedNode.type == 'Genus'}" header="Homo sapiens" class="reportPanel">
                        <h:outputText value="Outlinks" class="bold"/>
                        <p:dataList value="#{classificationBean.getXref(9606)}" var="link">
                            <h:outputText value="#{link.get(0)}: " />
                            <h:outputLink value="#{link.get(1)}" target="_blank" >#{link.get(2)}"</h:outputLink>
                        </p:dataList>
                        
                        
                    </p:panel>
                </p:dashboard>
                <div style="clear:both" />

            </p:panel>
        </h:form>
    </p:panel>
</body>
</html>
